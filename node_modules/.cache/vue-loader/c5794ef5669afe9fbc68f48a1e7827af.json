{"remainingRequest":"/Users/snithinnarayanan/Booking/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/snithinnarayanan/Booking/client/src/components/editRules.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/snithinnarayanan/Booking/client/src/components/editRules.vue","mtime":1580274875532},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBBbGVydCBmcm9tICcuL0FsZXJ0LnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIGVkaXRSdWxlc0Zvcm06IFsKICAgICAgewogICAgICAgIG9wMTogJ2FzZGFkcycsCiAgICAgICAgb3BlcmF0b3I6ICcnLAogICAgICAgIHR5cGU6ICcnLAogICAgICAgIHZhbHVlOiAnJywKICAgICAgICBhY3Rpb246ICcnLAogICAgICAgIGFjdGlvbnZhbHVlOiAnJywKICAgICAgICBidXNpbmVzc3J1bGU6ICcnLAogICAgICB9LAogICAgXSwKICAgIHNlbGVjdGVkOiBudWxsLAogICAgb3B0aW9uczogWydVSU1NaScsICdVSUNObycsICdVSUNXciddLAogICAgbWVzc2FnZTogJycsCiAgICBzaG93TWVzc2FnZTogZmFsc2UsCiAgfSksCiAgY29tcG9uZW50czogewogICAgYWxlcnQ6IEFsZXJ0LAogIH0sCiAgbWV0aG9kczogewogICAgYWRkbW9yZXJ1bGVzKCkgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9lZGl0cnVsZXMvSG9saWRheSBSdWxlJzsKICAgICAgYXhpb3MucHV0KHBhdGgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMuZWRpdFJ1bGVzRm9ybSA9IHJlc3BvbnNlOwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgY29uc3QgazEgPSBbXTsKICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3BvbnNlKS5mb3JFYWNoKChrZXkpID0+IHsKICAgICAgICAgICAgazEucHVzaChrZXkpOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCBzdGFydHNXaXRoQ29uZCA9IGsxLmZpbHRlcihjb25kaXRpb24gPT4gY29uZGl0aW9uLnN0YXJ0c1dpdGgoJ2NvbmQnKSk7CiAgICAgICAgICBjb25zb2xlLmxvZyhrMSk7CiAgICAgICAgICBjb25zb2xlLmxvZyhzdGFydHNXaXRoQ29uZCk7CiAgICAgICAgICBjb25zdCBsZW4gPSBzdGFydHNXaXRoQ29uZC5sZW5ndGg7CiAgICAgICAgICBjb25zb2xlLmxvZyhsZW4pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIHRoaXMuZ2V0Qm9va3MoKTsKICAgICAgICB9KTsKICAgICAgLy8gIGNvbnN0IHZhbDEgPSBuZXd2YWwgKyAxOwogICAgfSwKICAgIGFkZEJvb2socGF5bG9hZCkgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9ydWxlcyc7CiAgICAgIGF4aW9zLnBvc3QocGF0aCwgcGF5bG9hZCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnUnVsZXMgQWRkZWQgU3VjY2Vzc2Z1bGx5JzsKICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgaW5pdEZvcm0oKSB7CiAgICAgIHRoaXMuZWRpdFJ1bGVzRm9ybS5vcDEgPSAnJzsKICAgICAgdGhpcy5lZGl0UnVsZXNGb3JtLm9wZXJhdG9yID0gJyc7CiAgICAgIHRoaXMuZWRpdFJ1bGVzRm9ybS50eXBlID0gJyc7CiAgICAgIHRoaXMuZWRpdFJ1bGVzRm9ybS52YWx1ZSA9ICcnOwogICAgICB0aGlzLmVkaXRSdWxlc0Zvcm0uYWN0aW9uID0gJyc7CiAgICAgIHRoaXMuZWRpdFJ1bGVzRm9ybS5hY3Rpb252YWx1ZSA9ICcnOwogICAgICB0aGlzLmVkaXRSdWxlc0Zvcm0ubG9naWNhbG9wZXJhdG9yID0gJyc7CiAgICB9LAogICAgb25TdWJtaXQoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCBtYWluYXJyYXkgPSB0aGlzLmVkaXRSdWxlc0Zvcm07CiAgICAgIGNvbnN0IGxvdDEgPSB0aGlzLmVkaXRSdWxlc0Zvcm0ubG90OwogICAgICBjb25zdCB2YWxpZGl0eTEgPSB0aGlzLmVkaXRSdWxlc0Zvcm0udmFsaWRpdHk7CiAgICAgIGxldCBsb2dpY2Fsb3BlcmF0b3IxID0gdGhpcy5lZGl0UnVsZXNGb3JtLmxvZ2ljYWxvcGVyYXRvcjsKICAgICAgbGV0IGZvcm1kYXRhID0ge307CiAgICAgIGxldCBhcnJheWRhdGEgPSB7fTsKICAgICAgaWYgKG1haW5hcnJheS5sZW5ndGggPT09IDEpIHsKICAgICAgICBsb2dpY2Fsb3BlcmF0b3IxID0gJ05PTkUnOwogICAgICB9CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFpbmFycmF5Lmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgLy8gIGNvbnN0IGEgPSAnb3AxJzsKICAgICAgICBjb25zdCBvcGVyYW5kMSA9IHRoaXMuZWRpdFJ1bGVzRm9ybVtpXS5vcDE7CiAgICAgICAgbGV0IG9wZXJhdG9yMSA9IHRoaXMuZWRpdFJ1bGVzRm9ybVtpXS5vcGVyYXRvcjsKICAgICAgICBjb25zdCB0eXBlMSA9IHRoaXMuZWRpdFJ1bGVzRm9ybVtpXS50eXBlOwogICAgICAgIGxldCB2YWx1ZTEgPSB0aGlzLmVkaXRSdWxlc0Zvcm1baV0udmFsdWU7CiAgICAgICAgaWYgKG9wZXJhdG9yMSA9PT0gJ0VxdWFscycpIHsKICAgICAgICAgIG9wZXJhdG9yMSA9ICc9PSc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbHVlMSA9IHZhbHVlMS5zcGxpdCgnLCcpOwogICAgICAgIH0KICAgICAgICBjb25zdCBhY3Rpb24xID0gdGhpcy5lZGl0UnVsZXNGb3JtW2ldLmFjdGlvbjsKICAgICAgICBjb25zdCBhY3Rpb252YWx1ZTEgPSB0aGlzLmVkaXRSdWxlc0Zvcm1baV0uYWN0aW9udmFsdWU7CiAgICAgICAgZm9ybWRhdGEgPSB7fTsKICAgICAgICBjb25zdCBjb25kID0gJ2NvbmQnOwogICAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBgJHtjb25kfSR7aSArIDF9YDsKICAgICAgICBjb25zdCBvcGVyYW5kMiA9ICdvcGVyYW5kJzsKICAgICAgICBjb25zdCBvcGVyYXRvcjIgPSAnb3BlcmF0b3InOwogICAgICAgIGNvbnN0IHR5cGUyID0gJ3R5cGUnOwogICAgICAgIGNvbnN0IHZhbHVlMiA9ICd2YWx1ZSc7CiAgICAgICAgY29uc3QgYWN0aW9uMiA9ICdhY3Rpb24nOwogICAgICAgIGZvcm1kYXRhW2NvbmRpdGlvbnNdID0ge307CiAgICAgICAgZm9ybWRhdGFbY29uZGl0aW9uc11bb3BlcmFuZDJdID0gb3BlcmFuZDE7CiAgICAgICAgZm9ybWRhdGFbY29uZGl0aW9uc11bb3BlcmF0b3IyXSA9IG9wZXJhdG9yMTsKICAgICAgICBmb3JtZGF0YVtjb25kaXRpb25zXVt0eXBlMl0gPSB0eXBlMTsKICAgICAgICBmb3JtZGF0YVtjb25kaXRpb25zXVt2YWx1ZTJdID0gdmFsdWUxOwogICAgICAgIGZvcm1kYXRhW2NvbmRpdGlvbnNdW2FjdGlvbjJdID0ge307CiAgICAgICAgZm9ybWRhdGFbY29uZGl0aW9uc11bYWN0aW9uMl1bYWN0aW9uMV0gPSBhY3Rpb252YWx1ZTE7CiAgICAgICAgYXJyYXlkYXRhID0gT2JqZWN0LmFzc2lnbihhcnJheWRhdGEsIGZvcm1kYXRhKTsKICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShhcnJheWRhdGEsIG51bGwsIDIpKTsKICAgICAgfQogICAgICBjb25zdCBsb3QyID0gJ2xvdCc7CiAgICAgIGNvbnN0IHZhbGlkaXR5MiA9ICd2YWxpZGl0eSc7CiAgICAgIGNvbnN0IGxvZ2ljYWxvcGVyYXRvcjIgPSAnbG9naWNhbE9wZXJhdG9yJzsKICAgICAgY29uc3QgcnVsZW5hbWUgPSB0aGlzLmVkaXRSdWxlc0Zvcm0uYnVzaW5lc3NydWxlOwogICAgICBjb25zdCBmaW5hbGFycmF5MSA9IHt9OwogICAgICBmaW5hbGFycmF5MVtydWxlbmFtZV0gPSBhcnJheWRhdGE7CiAgICAgIC8vICBmaW5hbGFycmF5MVtydWxlbmFtZV1bbG90Ml0gPSBbXTsKICAgICAgZmluYWxhcnJheTFbcnVsZW5hbWVdW2xvdDJdID0gbG90MTsKICAgICAgZmluYWxhcnJheTFbcnVsZW5hbWVdW3ZhbGlkaXR5Ml0gPSB2YWxpZGl0eTE7CiAgICAgIGlmIChsb2dpY2Fsb3BlcmF0b3IxICE9PSAnTk9ORScpIHsKICAgICAgICBmaW5hbGFycmF5MVtydWxlbmFtZV1bbG9naWNhbG9wZXJhdG9yMl0gPSBsb2dpY2Fsb3BlcmF0b3IxOwogICAgICB9CiAgICAgIGNvbnN0IHBheWxvYWQgPSBmaW5hbGFycmF5MTsKICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgIHRoaXMuYWRkQm9vayhwYXlsb2FkKTsKICAgICAgdGhpcy5pbml0Rm9ybSgpOwogICAgfSwKICAgIG9uU3VibWl0VXBkYXRlKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy4kcmVmcy5lZGl0Qm9va01vZGFsLmhpZGUoKTsKICAgICAgbGV0IHJlYWQgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMuZWRpdEZvcm0ucmVhZFswXSkgcmVhZCA9IHRydWU7CiAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgdGl0bGU6IHRoaXMuZWRpdEZvcm0udGl0bGUsCiAgICAgICAgYXV0aG9yOiB0aGlzLmVkaXRGb3JtLmF1dGhvciwKICAgICAgICByZWFkLAogICAgICB9OwogICAgICB0aGlzLnVwZGF0ZUJvb2socGF5bG9hZCwgdGhpcy5lZGl0Rm9ybS5pZCk7CiAgICB9LAogICAgb25SZXNldChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuJHJlZnMuYWRkQm9va01vZGFsLmhpZGUoKTsKICAgICAgdGhpcy5pbml0Rm9ybSgpOwogICAgfSwKICAgIG9uUmVzZXRVcGRhdGUoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLiRyZWZzLmVkaXRCb29rTW9kYWwuaGlkZSgpOwogICAgICB0aGlzLmluaXRGb3JtKCk7IC8vIHdoeT8KICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hZGRtb3JlcnVsZXMoKTsKICB9LAp9Owo="},{"version":3,"sources":["editRules.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"editRules.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n      <div class=\"row\">\n      <div class=\"col-sm-10\">\n        <h1>Rules</h1>\n        <hr><br><br>\n        <alert :message=message v-if=\"showMessage\"></alert>\n        <br><br>\n    <v-modal ref=\"editRulesModal\"\n            id=\"rules-modal\"\n            title=\"Add a new book\"\n            hide-footer>\n        <div class=\"editRules\">\n      <b-form @submit=\"onSubmit\" @reset=\"onReset\" class=\"w-50\">\n        <b-form-group id=\"form-businessrule-group\"\n                    label=\"Business Rule:\"\n                    label-for=\"form-businessrule-input\">\n          <b-form-input id=\"form-businessrule-input\"\n                        type=\"text\"\n                        v-model=\"editRulesForm['cond1']['operator']\"\n                        name=\"editRulesForm[0][businessrule]\"\n                        required>\n          </b-form-input>\n          </b-form-group>\n        <div v-for=\"(rules, index) in editRulesForm\" :key=\"index\">\n      <b-form-group id=\"form-op1-group\"\n                    label=\"Operand:\"\n                    label-for=\"form-op1-input\">\n          <b-form-input id=\"form-op1-input\"\n                        type=\"text\"\n                        v-model=\"editRulesForm['cond1']['operand']\"\n                        :name=\"`editRulesForm[${index}][op1]`\"\n                        required>\n          </b-form-input>\n        </b-form-group>\n        <b-form-group id=\"form-operator-group\"\n                      label=\"Operator:\"\n                      label-for=\"form-operator-input\">\n            <b-form-input id=\"form-operator-input\"\n                          type=\"text\"\n                          v-model=\"editRulesForm.operator\"\n                          :name=\"`editRulesForm[${index}][operator]`\"\n                          value=\"operator\">\n            </b-form-input>\n          </b-form-group>\n        </div>\n      </b-form>\n      </div>\n    </v-modal>\n    <br><br>\n    <hr><br><br>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Alert from './Alert.vue';\n\nexport default {\n  data: () => ({\n    editRulesForm: [\n      {\n        op1: 'asdads',\n        operator: '',\n        type: '',\n        value: '',\n        action: '',\n        actionvalue: '',\n        businessrule: '',\n      },\n    ],\n    selected: null,\n    options: ['UIMMi', 'UICNo', 'UICWr'],\n    message: '',\n    showMessage: false,\n  }),\n  components: {\n    alert: Alert,\n  },\n  methods: {\n    addmorerules() {\n      const path = 'http://localhost:5000/editrules/Holiday Rule';\n      axios.put(path)\n        .then((res) => {\n          const response = res.data;\n          this.editRulesForm = response;\n          console.log(response);\n          const k1 = [];\n          Object.keys(response).forEach((key) => {\n            k1.push(key);\n          });\n          const startsWithCond = k1.filter(condition => condition.startsWith('cond'));\n          console.log(k1);\n          console.log(startsWithCond);\n          const len = startsWithCond.length;\n          console.log(len);\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getBooks();\n        });\n      //  const val1 = newval + 1;\n    },\n    addBook(payload) {\n      const path = 'http://localhost:5000/rules';\n      axios.post(path, payload)\n        .then(() => {\n          this.message = 'Rules Added Successfully';\n          this.showMessage = true;\n          window.scrollTo(0, 0);\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.log(error);\n        });\n    },\n    initForm() {\n      this.editRulesForm.op1 = '';\n      this.editRulesForm.operator = '';\n      this.editRulesForm.type = '';\n      this.editRulesForm.value = '';\n      this.editRulesForm.action = '';\n      this.editRulesForm.actionvalue = '';\n      this.editRulesForm.logicaloperator = '';\n    },\n    onSubmit(evt) {\n      evt.preventDefault();\n      const mainarray = this.editRulesForm;\n      const lot1 = this.editRulesForm.lot;\n      const validity1 = this.editRulesForm.validity;\n      let logicaloperator1 = this.editRulesForm.logicaloperator;\n      let formdata = {};\n      let arraydata = {};\n      if (mainarray.length === 1) {\n        logicaloperator1 = 'NONE';\n      }\n      for (let i = 0; i < mainarray.length; i += 1) {\n        //  const a = 'op1';\n        const operand1 = this.editRulesForm[i].op1;\n        let operator1 = this.editRulesForm[i].operator;\n        const type1 = this.editRulesForm[i].type;\n        let value1 = this.editRulesForm[i].value;\n        if (operator1 === 'Equals') {\n          operator1 = '==';\n        } else {\n          value1 = value1.split(',');\n        }\n        const action1 = this.editRulesForm[i].action;\n        const actionvalue1 = this.editRulesForm[i].actionvalue;\n        formdata = {};\n        const cond = 'cond';\n        const conditions = `${cond}${i + 1}`;\n        const operand2 = 'operand';\n        const operator2 = 'operator';\n        const type2 = 'type';\n        const value2 = 'value';\n        const action2 = 'action';\n        formdata[conditions] = {};\n        formdata[conditions][operand2] = operand1;\n        formdata[conditions][operator2] = operator1;\n        formdata[conditions][type2] = type1;\n        formdata[conditions][value2] = value1;\n        formdata[conditions][action2] = {};\n        formdata[conditions][action2][action1] = actionvalue1;\n        arraydata = Object.assign(arraydata, formdata);\n        alert(JSON.stringify(arraydata, null, 2));\n      }\n      const lot2 = 'lot';\n      const validity2 = 'validity';\n      const logicaloperator2 = 'logicalOperator';\n      const rulename = this.editRulesForm.businessrule;\n      const finalarray1 = {};\n      finalarray1[rulename] = arraydata;\n      //  finalarray1[rulename][lot2] = [];\n      finalarray1[rulename][lot2] = lot1;\n      finalarray1[rulename][validity2] = validity1;\n      if (logicaloperator1 !== 'NONE') {\n        finalarray1[rulename][logicaloperator2] = logicaloperator1;\n      }\n      const payload = finalarray1;\n      console.log(payload);\n      this.addBook(payload);\n      this.initForm();\n    },\n    onSubmitUpdate(evt) {\n      evt.preventDefault();\n      this.$refs.editBookModal.hide();\n      let read = false;\n      if (this.editForm.read[0]) read = true;\n      const payload = {\n        title: this.editForm.title,\n        author: this.editForm.author,\n        read,\n      };\n      this.updateBook(payload, this.editForm.id);\n    },\n    onReset(evt) {\n      evt.preventDefault();\n      this.$refs.addBookModal.hide();\n      this.initForm();\n    },\n    onResetUpdate(evt) {\n      evt.preventDefault();\n      this.$refs.editBookModal.hide();\n      this.initForm(); // why?\n    },\n  },\n  created() {\n    this.addmorerules();\n  },\n};\n</script>\n<style src=\"vue-multiselect/dist/vue-multiselect.min.css\"></style>\n"]}]}