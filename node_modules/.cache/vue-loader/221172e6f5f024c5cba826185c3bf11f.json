{"remainingRequest":"/Users/snithinnarayanan/testEngine/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/snithinnarayanan/testEngine/client/src/components/rulespriority.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/snithinnarayanan/testEngine/client/src/components/rulespriority.vue","mtime":1583824457076},{"path":"/Users/snithinnarayanan/testEngine/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/testEngine/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/testEngine/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/testEngine/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgQWxlcnQgZnJvbSAnLi9BbGVydC52dWUnOwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScKaW1wb3J0IGxlZnROYXYgZnJvbSAnLi9sZWZ0TmF2LnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInByaW9yaXR5IiwKICBkaXNwbGF5OiAiUHJpb3JpdHkiLAogIG9yZGVyOiAxLAogIGNvbXBvbmVudHM6IHsKICAgIGFsZXJ0OiBBbGVydCwKICAgIGxlZnROYXY6IGxlZnROYXYsCiAgICBkcmFnZ2FibGUsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW5hYmxlZHJ1bGVzOiBbXSwKICAgICAgZGlzYWJsZWRydWxlczogW10sCiAgICAgIG9wdGlvbnJ1bGVzOiBbXSwKICAgICAgbWFuZGF0b3J5cnVsZXM6IFtdLAogICAgICBtZXNzYWdlOiAnJywKICAgICAgc2hvd01lc3NhZ2U6IGZhbHNlLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGdldCBhbGwgdGhlIG9wdGlvbmFsIGFuZCBtYW5kYXRvcnkgcnVsZXMKICAgIGdldHJ1bGVzKCkgewogICAgICBjb25zdCBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9idXNydWxlcyc7CiAgICAgIGF4aW9zLnBvc3QocGF0aCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnJ1bGVzID0gW107CiAgICAgICAgICBjb25zdCBydWxlID0gW107CiAgICAgICAgICBsZXQgcnVsZVZhbHVlID0gJyc7CiAgICAgICAgICBsZXQgcnVsZVN1YnZhbHVlID0gJyc7CiAgICAgICAgICBjb25zdCBlcnVsZSA9IHt9OwogICAgICAgICAgY29uc3QgbXJ1bGUgPSBbXTsKICAgICAgICAgIE9iamVjdC5rZXlzKHJlcy5kYXRhKS5mb3JFYWNoKChrZXkpID0+IHsKICAgICAgICAgICAgcnVsZVZhbHVlID0gcmVzLmRhdGFba2V5XTsKICAgICAgICAgICAgaWYgKHJ1bGVWYWx1ZVsnZW5hYmxlJ10gPT0gInRydWUiICYmIHJ1bGVWYWx1ZVsncHJpb3JpdHl0eXBlJ10gPT0gIm9wdGlvbmFsIikgewogICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gcnVsZVZhbHVlWydwcmlvcml0eXZhbHVlJ107CiAgICAgICAgICAgICAgICBlcnVsZVt0aXRsZV0gPSBrZXk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAocnVsZVZhbHVlWydlbmFibGUnXSA9PSAidHJ1ZSIgJiYgcnVsZVZhbHVlWydwcmlvcml0eXR5cGUnXSA9PSAibWFuZGF0b3J5IikgewogICAgICAgICAgICAgICAgbXJ1bGUucHVzaChrZXkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZW5hYmxlZHJ1bGVzID0gZXJ1bGU7CiAgICAgICAgICB0aGlzLm1hbmRhdG9yeXJ1bGVzID0gbXJ1bGU7CiAgICAgICAgICBjb25zdCBrZXkxID0gT2JqZWN0LmtleXModGhpcy5lbmFibGVkcnVsZXMpOwogICAgICAgICAgY29uc3QgbGVuMSA9IE1hdGgubWF4LmFwcGx5KG51bGwsIGtleTEpOwogICAgICAgICAgZm9yKHZhciBpID0gMTsgaSA8PSBsZW4xOyBpKyspCiAgICAgICAgICB7CiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZWRydWxlcy5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgICAgICAgIHRoaXMub3B0aW9ucnVsZXMucHVzaCh0aGlzLmVuYWJsZWRydWxlc1tpXSk7CiAgICAgICAgICAgIH0gIAogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgbG9nOiBmdW5jdGlvbihldnQpIHsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKGV2dCk7CiAgICB9LAogICAgLy8gc3dhcCBydWxlcyBiZXR3ZWVuIG9wdGlvbmFsIGFuZCBtYW5kYXRvcnkgbGlzdCBhbmQgdXBkYXRlCiAgICB1cGRhdGVQcmlvcml0eSgpIHsKICAgICAgY29uc3QgcGF5bG9hZCA9IHsKICAgICAgICAgIG9wdGlvbnMgOiB0aGlzLm9wdGlvbnJ1bGVzLAogICAgICAgICAgbWFuZGF0b3J5IDogdGhpcy5tYW5kYXRvcnlydWxlcywKICAgICAgfTsKICAgICAgY29uc3QgcGF0aCA9ICdodHRwOi8vbG9jYWxob3N0OjUwMDAvcHJpb3JpdHknOwogICAgICBheGlvcy5wb3N0KHBhdGgsIHBheWxvYWQpCiAgICAgICAgLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICdVcGRhdGVkJzsKICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOyAKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gZGlzcGxheSBydWxlcyBvbmxvYWQKICAgIHRoaXMuZ2V0cnVsZXMoKTsKICB9LAp9Owo="},{"version":3,"sources":["rulespriority.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"rulespriority.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\" style=\"max-width:100%;padding:0px;height:100%;\">\n <!--  <leftNav></leftNav>   Left side Navigation -->\n     <div class=\"row\"\n    style=\"margin-left: 280px;border-left: 18px solid #f8f9fa;height:100%\">\n    <div style=\"height: 20px;width: 100%;position: absolute;margin-bottom: 20px;\n    margin-left: 15px;margin-top: 15px;\">\n    <h4>Rule Priority</h4>\n    <hr>\n    </div>\n    <!-- Optional rules list with priority -->\n    <div class=\"col-3\" style=\"margin-top: 85px;\">\n      <h5>Optional Rules</h5>\n      <br>\n      <draggable class=\"list-group\" :list=\"optionrules\" group=\"people\" @change=\"log\">\n        <div\n          class=\"list-group-item\"\n          v-for=\"(element, index) in optionrules\"\n          :key=\"index\"\n          style=\"padding-top: 0.25rem;padding-bottom: 0.25rem;\"\n        >\n          {{ index+1 }}. {{ element }}\n        </div>\n      </draggable>\n    </div>\n    <!-- Mandatory rules list  -->\n    <div class=\"col-3\" style=\"margin-top: 85px;\">\n      <h5>Mandatory Rules</h5>\n      <br>\n      <draggable class=\"list-group\" :list=\"mandatoryrules\" group=\"people\" @change=\"log\">\n        <div\n          class=\"list-group-item\"\n          v-for=\"(element, index) in mandatoryrules\"\n          :key=\"index\"\n          style=\"padding-top: 0.25rem;padding-bottom: 0.25rem;\"\n        >\n          {{ element }}\n        </div>\n        \n      </draggable>\n    </div>\n\n    <b-button type=\"button\" variant=\"primary\" @click=\"updatePriority()\"\n    style=\"width: 150px;margin-left: 30px;margin-top:136px;height:40px;\">Update</b-button>\n    <alert :message=message v-if=\"showMessage\" style=\"width: 150px;margin-left: 30px;margin-top:136px;height:40px;\"></alert>\n  </div>\n  </div>\n</template>\n<script>\n\nimport axios from 'axios';\nimport Alert from './Alert.vue';\nimport draggable from 'vuedraggable'\nimport leftNav from './leftNav.vue';\n\nexport default {\n  name: \"priority\",\n  display: \"Priority\",\n  order: 1,\n  components: {\n    alert: Alert,\n    leftNav: leftNav,\n    draggable,\n  },\n  data() {\n    return {\n      enabledrules: [],\n      disabledrules: [],\n      optionrules: [],\n      mandatoryrules: [],\n      message: '',\n      showMessage: false,\n    };\n  },\n  methods: {\n    // get all the optional and mandatory rules\n    getrules() {\n      const path = 'http://localhost:5000/busrules';\n      axios.post(path)\n        .then((res) => {\n          this.rules = [];\n          const rule = [];\n          let ruleValue = '';\n          let ruleSubvalue = '';\n          const erule = {};\n          const mrule = [];\n          Object.keys(res.data).forEach((key) => {\n            ruleValue = res.data[key];\n            if (ruleValue['enable'] == \"true\" && ruleValue['prioritytype'] == \"optional\") {\n                let title = ruleValue['priorityvalue'];\n                erule[title] = key;\n            }\n            else if (ruleValue['enable'] == \"true\" && ruleValue['prioritytype'] == \"mandatory\") {\n                mrule.push(key);\n            }\n          });\n          this.enabledrules = erule;\n          this.mandatoryrules = mrule;\n          const key1 = Object.keys(this.enabledrules);\n          const len1 = Math.max.apply(null, key1);\n          for(var i = 1; i <= len1; i++)\n          {\n            if (this.enabledrules.hasOwnProperty(i)) {\n              this.optionrules.push(this.enabledrules[i]);\n            }  \n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    log: function(evt) {\n      window.console.log(evt);\n    },\n    // swap rules between optional and mandatory list and update\n    updatePriority() {\n      const payload = {\n          options : this.optionrules,\n          mandatory : this.mandatoryrules,\n      };\n      const path = 'http://localhost:5000/priority';\n      axios.post(path, payload)\n        .then((resp) => {\n          this.message = 'Updated';\n          this.showMessage = true;\n          window.scrollTo(0, 0);\n        })\n        .catch((error) => {\n          console.log(error);\n        }); \n    },\n  },\n  created() {\n    // display rules onload\n    this.getrules();\n  },\n};\n</script>"]}]}