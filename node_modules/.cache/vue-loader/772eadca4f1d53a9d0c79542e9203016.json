{"remainingRequest":"/Users/snithinnarayanan/Booking/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/snithinnarayanan/Booking/client/src/components/rulesdisplay.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/snithinnarayanan/Booking/client/src/components/rulesdisplay.vue","mtime":1580729840737},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBBbGVydCBmcm9tICcuL0FsZXJ0LnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVzOiBbXSwKICAgICAgbWVzc2FnZTogJycsCiAgICAgIHNob3dNZXNzYWdlOiBmYWxzZSwKICAgICAgcnVsZW5hbWU6ICcnLAogICAgICBzdGFydHZhbGlkOiAnJywKICAgICAgc3RvcHZhbGlkOiAnJywKICAgICAgZWRpdEZvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGF1dGhvcjogJycsCiAgICAgICAgcmVhZDogW10sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgYWxlcnQ6IEFsZXJ0LAogIH0sCiAgbWV0aG9kczogewogICAgZ2V0cnVsZXMoKSB7CiAgICAgIGNvbnN0IHBhdGggPSAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2J1c3J1bGVzJzsKICAgICAgYXhpb3MucG9zdChwYXRoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICcnOwogICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSA9IHRydWU7CiAgICAgICAgICB0aGlzLnJ1bGVzID0gW107CiAgICAgICAgICBjb25zdCBydWxlID0gW107CiAgICAgICAgICBPYmplY3Qua2V5cyhyZXMuZGF0YSkuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgICAgIHJ1bGUucHVzaChrZXkpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnJ1bGVzID0gcnVsZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICB0aGlzLmdldEJvb2tzKCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZGlzcGxheXJ1bGVzKHJ1bGUpIHsKICAgICAgY29uc3QgcGF0aCA9IGBodHRwOi8vbG9jYWxob3N0OjUwMDAvYnVzcnVsZXMvJHtydWxlfWA7CiAgICAgIGF4aW9zLnB1dChwYXRoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICcnOwogICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSA9IHRydWU7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzcG9uc2UnKS5pbm5lckhUTUwgPSByZXMuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICB0aGlzLmdldEJvb2tzKCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgcnVsZXNmdW5jdGlvbihuYW1lKSB7CiAgICAgIGNvbnN0IHBhdGggPSAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2J1c3J1bGVzJzsKICAgICAgdGhpcy5ydWxlbmFtZSA9IG5hbWU7CiAgICAgIGF4aW9zLnBvc3QocGF0aCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnJzsKICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgdGhpcy5ydWxlcyA9IFtdOwogICAgICAgICAgY29uc3QgcnVsZSA9IFtdOwogICAgICAgICAgT2JqZWN0LmtleXMocmVzLmRhdGEpLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgICBpZiAobmFtZSA9PT0ga2V5KSB7CiAgICAgICAgICAgICAgY29uc3QgdmFsID0gcmVzLmRhdGFba2V5XTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbCkuZm9yRWFjaCgoa2V5MSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdmFsMSA9IHZhbFtrZXkxXTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbDEpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coa2V5MSk7CiAgICAgICAgICAgICAgICBpZiAoa2V5MSA9PT0gJ3ZhbGlkaXR5JykgewogICAgICAgICAgICAgICAgICBjb25zdCBzdGFydHZhbGlkMSA9IHZhbDEuc3RhcnQ7CiAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnR2YWxpZCA9IGNvbnZlcnREYXRlKHN0YXJ0dmFsaWQxKTsKICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wdmFsaWQgPSB2YWwxLmVuZDsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5zdGFydHZhbGlkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChrZXkxID09PSAnbG9naWNhbE9wZXJhdG9yJykgewogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnJ1bGVzID0gcnVsZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICB0aGlzLmdldEJvb2tzKCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgY29udmVydERhdGUoZGF0ZVN0cmluZyl7CiAgICAgIHZhciBwID0gZGF0ZVN0cmluZy5zcGxpdCgvXEQvZykKICAgICAgcmV0dXJuIFtwWzJdLHBbMV0scFswXSBdLmpvaW4oIi0iKQogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldHJ1bGVzKCk7CiAgfSwKfTsK"},{"version":3,"sources":["rulesdisplay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"rulesdisplay.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-sm-10\">\n        <h1>Business Rules</h1>\n        <hr><br><br>\n        <alert :message=message v-if=\"showMessage\"></alert>\n        <button type=\"button\" class=\"btn btn-success btn-sm\"\n        @click=\"$router.push('rules')\">Add Rules</button>\n        <br><br>\n        <table class=\"table table-hover\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Rules</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(rule, key) in rules\" :key=\"key\" >\n              <td>{{ rule }}</td>\n              <td>\n                <div class=\"btn-group\" role=\"group\">\n                  <button\n                          type=\"button\"\n                          class=\"btn btn-warning btn-sm\"\n                          v-b-modal.book-update-modal\n                          @click=\"displayrules(rule)\"\n                          style =\"margin-right:20px;\">\n                      View Business Rule\n                  </button>\n                  <button\n                          type=\"button\"\n                          class=\"btn btn-warning btn-sm\"\n                          @click=\"rulesfunction(rule)\">\n                      Rule Functionality\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div>\n      <p>Conditions for {{ rulename }}</p>\n      <p>This rule is applicable for lots and is valid between {{ startvalid }} and {{ stopvalid }} </p>\n    </div>\n    <b-modal ref=\"businessrulesModal\"\n            id=\"book-update-modal\"\n            title=\"\"\n            hide-footer>\n          <div id=\"response\" class=\"tablemodal\"></div>\n    </b-modal>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Alert from './Alert.vue';\n\nexport default {\n  data() {\n    return {\n      rules: [],\n      message: '',\n      showMessage: false,\n      rulename: '',\n      startvalid: '',\n      stopvalid: '',\n      editForm: {\n        id: '',\n        title: '',\n        author: '',\n        read: [],\n      },\n    };\n  },\n  components: {\n    alert: Alert,\n  },\n  methods: {\n    getrules() {\n      const path = 'http://localhost:5000/busrules';\n      axios.post(path)\n        .then((res) => {\n          this.message = '';\n          this.showMessage = true;\n          this.rules = [];\n          const rule = [];\n          Object.keys(res.data).forEach((key) => {\n            rule.push(key);\n          });\n          this.rules = rule;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getBooks();\n        });\n    },\n    displayrules(rule) {\n      const path = `http://localhost:5000/busrules/${rule}`;\n      axios.put(path)\n        .then((res) => {\n          this.message = '';\n          this.showMessage = true;\n          document.getElementById('response').innerHTML = res.data;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getBooks();\n        });\n    },\n    rulesfunction(name) {\n      const path = 'http://localhost:5000/busrules';\n      this.rulename = name;\n      axios.post(path)\n        .then((res) => {\n          this.message = '';\n          this.showMessage = true;\n          this.rules = [];\n          const rule = [];\n          Object.keys(res.data).forEach((key) => {\n            if (name === key) {\n              const val = res.data[key];\n              console.log(val);\n              Object.keys(val).forEach((key1) => {\n                const val1 = val[key1];\n                console.log(val1);\n                console.log(key1);\n                if (key1 === 'validity') {\n                  const startvalid1 = val1.start;\n                  this.startvalid = convertDate(startvalid1);\n                  this.stopvalid = val1.end;\n                  console.log(this.startvalid);\n                }\n                if (key1 === 'logicalOperator') {\n                  \n                }\n              });\n            }\n          });\n          this.rules = rule;\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getBooks();\n        });\n    },\n    convertDate(dateString){\n      var p = dateString.split(/\\D/g)\n      return [p[2],p[1],p[0] ].join(\"-\")\n    },\n  },\n  created() {\n    this.getrules();\n  },\n};\n</script>\n"]}]}