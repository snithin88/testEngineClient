{"remainingRequest":"/Users/snithinnarayanan/Booking/client/node_modules/babel-loader/lib/index.js!/Users/snithinnarayanan/Booking/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/snithinnarayanan/Booking/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/snithinnarayanan/Booking/client/src/components/rulespriority.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/snithinnarayanan/Booking/client/src/components/rulespriority.vue","mtime":1583824457076},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/snithinnarayanan/Booking/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgQWxlcnQgZnJvbSAnLi9BbGVydC52dWUnOwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZSc7CmltcG9ydCBsZWZ0TmF2IGZyb20gJy4vbGVmdE5hdi52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInByaW9yaXR5IiwKICBkaXNwbGF5OiAiUHJpb3JpdHkiLAogIG9yZGVyOiAxLAogIGNvbXBvbmVudHM6IHsKICAgIGFsZXJ0OiBBbGVydCwKICAgIGxlZnROYXY6IGxlZnROYXYsCiAgICBkcmFnZ2FibGU6IGRyYWdnYWJsZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVuYWJsZWRydWxlczogW10sCiAgICAgIGRpc2FibGVkcnVsZXM6IFtdLAogICAgICBvcHRpb25ydWxlczogW10sCiAgICAgIG1hbmRhdG9yeXJ1bGVzOiBbXSwKICAgICAgbWVzc2FnZTogJycsCiAgICAgIHNob3dNZXNzYWdlOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGdldCBhbGwgdGhlIG9wdGlvbmFsIGFuZCBtYW5kYXRvcnkgcnVsZXMKICAgIGdldHJ1bGVzOiBmdW5jdGlvbiBnZXRydWxlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9idXNydWxlcyc7CiAgICAgIGF4aW9zLnBvc3QocGF0aCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMucnVsZXMgPSBbXTsKICAgICAgICB2YXIgcnVsZSA9IFtdOwogICAgICAgIHZhciBydWxlVmFsdWUgPSAnJzsKICAgICAgICB2YXIgcnVsZVN1YnZhbHVlID0gJyc7CiAgICAgICAgdmFyIGVydWxlID0ge307CiAgICAgICAgdmFyIG1ydWxlID0gW107CiAgICAgICAgT2JqZWN0LmtleXMocmVzLmRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcnVsZVZhbHVlID0gcmVzLmRhdGFba2V5XTsKCiAgICAgICAgICBpZiAocnVsZVZhbHVlWydlbmFibGUnXSA9PSAidHJ1ZSIgJiYgcnVsZVZhbHVlWydwcmlvcml0eXR5cGUnXSA9PSAib3B0aW9uYWwiKSB7CiAgICAgICAgICAgIHZhciB0aXRsZSA9IHJ1bGVWYWx1ZVsncHJpb3JpdHl2YWx1ZSddOwogICAgICAgICAgICBlcnVsZVt0aXRsZV0gPSBrZXk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJ1bGVWYWx1ZVsnZW5hYmxlJ10gPT0gInRydWUiICYmIHJ1bGVWYWx1ZVsncHJpb3JpdHl0eXBlJ10gPT0gIm1hbmRhdG9yeSIpIHsKICAgICAgICAgICAgbXJ1bGUucHVzaChrZXkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF90aGlzLmVuYWJsZWRydWxlcyA9IGVydWxlOwogICAgICAgIF90aGlzLm1hbmRhdG9yeXJ1bGVzID0gbXJ1bGU7CiAgICAgICAgdmFyIGtleTEgPSBPYmplY3Qua2V5cyhfdGhpcy5lbmFibGVkcnVsZXMpOwogICAgICAgIHZhciBsZW4xID0gTWF0aC5tYXguYXBwbHkobnVsbCwga2V5MSk7CgogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGxlbjE7IGkrKykgewogICAgICAgICAgaWYgKF90aGlzLmVuYWJsZWRydWxlcy5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgICAgICBfdGhpcy5vcHRpb25ydWxlcy5wdXNoKF90aGlzLmVuYWJsZWRydWxlc1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgbG9nOiBmdW5jdGlvbiBsb2coZXZ0KSB7CiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhldnQpOwogICAgfSwKICAgIC8vIHN3YXAgcnVsZXMgYmV0d2VlbiBvcHRpb25hbCBhbmQgbWFuZGF0b3J5IGxpc3QgYW5kIHVwZGF0ZQogICAgdXBkYXRlUHJpb3JpdHk6IGZ1bmN0aW9uIHVwZGF0ZVByaW9yaXR5KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBwYXlsb2FkID0gewogICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucnVsZXMsCiAgICAgICAgbWFuZGF0b3J5OiB0aGlzLm1hbmRhdG9yeXJ1bGVzCiAgICAgIH07CiAgICAgIHZhciBwYXRoID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9wcmlvcml0eSc7CiAgICAgIGF4aW9zLnBvc3QocGF0aCwgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzMi5tZXNzYWdlID0gJ1VwZGF0ZWQnOwogICAgICAgIF90aGlzMi5zaG93TWVzc2FnZSA9IHRydWU7CiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIGRpc3BsYXkgcnVsZXMgb25sb2FkCiAgICB0aGlzLmdldHJ1bGVzKCk7CiAgfQp9Ow=="},{"version":3,"sources":["rulespriority.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\" style=\"max-width:100%;padding:0px;height:100%;\">\n <!--  <leftNav></leftNav>   Left side Navigation -->\n     <div class=\"row\"\n    style=\"margin-left: 280px;border-left: 18px solid #f8f9fa;height:100%\">\n    <div style=\"height: 20px;width: 100%;position: absolute;margin-bottom: 20px;\n    margin-left: 15px;margin-top: 15px;\">\n    <h4>Rule Priority</h4>\n    <hr>\n    </div>\n    <!-- Optional rules list with priority -->\n    <div class=\"col-3\" style=\"margin-top: 85px;\">\n      <h5>Optional Rules</h5>\n      <br>\n      <draggable class=\"list-group\" :list=\"optionrules\" group=\"people\" @change=\"log\">\n        <div\n          class=\"list-group-item\"\n          v-for=\"(element, index) in optionrules\"\n          :key=\"index\"\n          style=\"padding-top: 0.25rem;padding-bottom: 0.25rem;\"\n        >\n          {{ index+1 }}. {{ element }}\n        </div>\n      </draggable>\n    </div>\n    <!-- Mandatory rules list  -->\n    <div class=\"col-3\" style=\"margin-top: 85px;\">\n      <h5>Mandatory Rules</h5>\n      <br>\n      <draggable class=\"list-group\" :list=\"mandatoryrules\" group=\"people\" @change=\"log\">\n        <div\n          class=\"list-group-item\"\n          v-for=\"(element, index) in mandatoryrules\"\n          :key=\"index\"\n          style=\"padding-top: 0.25rem;padding-bottom: 0.25rem;\"\n        >\n          {{ element }}\n        </div>\n        \n      </draggable>\n    </div>\n\n    <b-button type=\"button\" variant=\"primary\" @click=\"updatePriority()\"\n    style=\"width: 150px;margin-left: 30px;margin-top:136px;height:40px;\">Update</b-button>\n    <alert :message=message v-if=\"showMessage\" style=\"width: 150px;margin-left: 30px;margin-top:136px;height:40px;\"></alert>\n  </div>\n  </div>\n</template>\n<script>\n\nimport axios from 'axios';\nimport Alert from './Alert.vue';\nimport draggable from 'vuedraggable'\nimport leftNav from './leftNav.vue';\n\nexport default {\n  name: \"priority\",\n  display: \"Priority\",\n  order: 1,\n  components: {\n    alert: Alert,\n    leftNav: leftNav,\n    draggable,\n  },\n  data() {\n    return {\n      enabledrules: [],\n      disabledrules: [],\n      optionrules: [],\n      mandatoryrules: [],\n      message: '',\n      showMessage: false,\n    };\n  },\n  methods: {\n    // get all the optional and mandatory rules\n    getrules() {\n      const path = 'http://localhost:5000/busrules';\n      axios.post(path)\n        .then((res) => {\n          this.rules = [];\n          const rule = [];\n          let ruleValue = '';\n          let ruleSubvalue = '';\n          const erule = {};\n          const mrule = [];\n          Object.keys(res.data).forEach((key) => {\n            ruleValue = res.data[key];\n            if (ruleValue['enable'] == \"true\" && ruleValue['prioritytype'] == \"optional\") {\n                let title = ruleValue['priorityvalue'];\n                erule[title] = key;\n            }\n            else if (ruleValue['enable'] == \"true\" && ruleValue['prioritytype'] == \"mandatory\") {\n                mrule.push(key);\n            }\n          });\n          this.enabledrules = erule;\n          this.mandatoryrules = mrule;\n          const key1 = Object.keys(this.enabledrules);\n          const len1 = Math.max.apply(null, key1);\n          for(var i = 1; i <= len1; i++)\n          {\n            if (this.enabledrules.hasOwnProperty(i)) {\n              this.optionrules.push(this.enabledrules[i]);\n            }  \n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    log: function(evt) {\n      window.console.log(evt);\n    },\n    // swap rules between optional and mandatory list and update\n    updatePriority() {\n      const payload = {\n          options : this.optionrules,\n          mandatory : this.mandatoryrules,\n      };\n      const path = 'http://localhost:5000/priority';\n      axios.post(path, payload)\n        .then((resp) => {\n          this.message = 'Updated';\n          this.showMessage = true;\n          window.scrollTo(0, 0);\n        })\n        .catch((error) => {\n          console.log(error);\n        }); \n    },\n  },\n  created() {\n    // display rules onload\n    this.getrules();\n  },\n};\n</script>"],"sourceRoot":"src/components"}]}